/*
 * SNavStatsLegend.cpp
 *
 *  Created on: 26 sept. 2010
 *      Author: chakode
 */

#include "../include/SNavStats.hpp"


SNavStatsLegend::SNavStatsLegend(const QPoint & _left_top_corner, QWidget * _parent)
: QWidget(_parent)
{
	QFont font("Times", 10, QFont::NoAntialias);
	QFontMetrics font_metrics(font) ;
	qint32 x_top_corner, y_top_corner, x_label, char_h, char_w ;

	x_top_corner = _left_top_corner.x() ;
	y_top_corner = _left_top_corner.y() ;
	x_label = x_top_corner + 15 ;
	char_h = font_metrics.height() ;
	char_w = font_metrics.charWidth("c", 0) ;

	normal.addRect(x_top_corner, y_top_corner, 10, 10) ;
	normal.addText(x_label, y_top_corner + 10, font, "normal") ;

	warning.addRect(x_top_corner, y_top_corner + 15 , 10, 10) ;
	warning.addText(x_label, y_top_corner + 25, font, "warning") ;

	critical.addRect(x_top_corner, y_top_corner + 30, 10, 10) ;
	critical.addText(x_label, y_top_corner + 40, font, "critical") ;

	unknown.addRect(x_top_corner, y_top_corner + 45, 10, 10) ;
	unknown.addText(x_label, y_top_corner + 55, font, "unknown") ;

	resize(x_label + 10 * char_w, y_top_corner + 65) ;
	setStyleSheet("background:transparent") ;
}

void SNavStatsLegend::paintEvent(QPaintEvent *)
{
	QPainter painter(this) ;
	painter.setRenderHint(QPainter::Antialiasing) ;

	painter.setBrush( OK_COLOR ) ;
	painter.drawPath(normal) ;

	painter.setBrush( WARNING_COLOR ) ;
	painter.drawPath(warning) ;

	painter.setBrush( CRITICAL_COLOR) ;
	painter.drawPath(critical) ;

	painter.setBrush( UNKNOWN_COLOR ) ;
	painter.drawPath(unknown) ;
}

QSize SNavStatsLegend::minimumSizeHint() const
		{
	return QSize(250, 300) ;
		}

 QSize SNavStatsLegend::sizeHint() const
		{
	return QSize(250, 300) ;
		}
